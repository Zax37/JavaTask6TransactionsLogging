plugins {
    id "java"
    id "groovy"
    id "jacoco"
    id "maven-publish"
	id 'application'
    id "com.github.johnrengelman.shadow" version "2.0.2"
}

group 'uj.jwzp.w2'

sourceCompatibility = 1.8

mainClassName = "uj.jwzp.w2.e3.TransactionsGenerator"

jar {
    manifest {
        attributes("Implementation-Title": project.name,
            "Main-Class": mainClassName)
    }

    from {
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    }
}

repositories {
    mavenCentral()
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            from components.java
        }
    }
}

jacoco {
    toolVersion = "0.8.0"
}

dependencies {
    compile 'ch.qos.logback:logback-classic:1.2.3'
    compileOnly 'org.projectlombok:lombok:1.16.20'
    testCompile(
            //JUnit
            'junit:junit:4.12',

            //Rich asserting: AssertJ
            'org.assertj:assertj-core:3.9.0',

            //Mocks: Mockito
            'org.mockito:mockito-core:2.8.9'
    )
}

build.dependsOn(tasks.jacocoTestReport)
